---
const {
    index = 1,
    cod_suc = '',
    sucursal = '',
    animation = 0,
    total = 0,
    gtotal = 0,
    impuesto = 0,
    ticket = 0
} = Astro.props;

const FormatteNumber = (value: number) =>{
  return new Intl.NumberFormat('en-US', {
    style: 'currency',
    currency: 'USD',
  }).format(value);
}
---

<div class="card-container" id="card-container" style={`animation-delay: ${animation * 100}ms`}>
    <div class="card-professional" id="card-professional">
    
    <span class="ranking-number">#{index}</span>
    <div class="flex items-center gap-3 mb-6 relative z-10">
        <div class="icon-box w-10 h-10 rounded-xl bg-slate-50 flex items-center justify-center text-blue-600 shadow-sm">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
        </svg>
        </div>
        <div>
        <p class="text-[10px] font-bold text-slate-700 uppercase tracking-tighter">{cod_suc}</p>
        <h3 class="text-base font-bold text-slate-800 tracking-tight">{sucursal}</h3>
        </div>
    </div>

    <div class="space-y-2 mb-6 text-sm">
        <div class="flex justify-between"><span class="text-slate-700">Ticket</span><span class="font-semibold text-slate-400">{FormatteNumber(ticket)}</span></div>
        <div class="flex justify-between"><span class="text-slate-700">Total</span><span class="font-semibold text-slate-700">{FormatteNumber(total)}</span></div>
        <div class="flex justify-between"><span class="text-slate-700">Subtotal</span><span class="font-semibold text-slate-700">{FormatteNumber(gtotal)}</span></div>
        <div class="flex justify-between"><span class="text-slate-700">Impuestos</span><span class="font-semibold text-slate-400">{FormatteNumber(impuesto)}</span></div>
    </div>

    <div class="mt-auto pt-4 border-t border-slate-50 flex justify-between items-end">
        <div>
        <p class="text-[9px] font-black text-blue-600 uppercase mb-1">Total Neto</p>
        <p class="text-2xl font-black text-slate-900 leading-none">{FormatteNumber(total)}</p>
        </div>
    </div>

    </div>
</div>

<style is:global>
.card-container {
    perspective: 1000px;
}
.card-professional {
    background: white;
    border: 1px solid #0772dd55;
    border-radius: 1rem;
    padding: 1.5rem;
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    cursor: pointer;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    height: 100%;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.02);
}
@media (hover: hover) {
    .card-professional:hover {
    transform: translateY(-8px) rotateX(4deg) rotateY(2deg);
    border-color: #0772ddd5;
    box-shadow: 0 20px 40px rgba(37, 99, 235, 0.08);
    }
    .card-professional::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 4px;
    background: #2563eb;
    transform: scaleX(0);
    transition: transform 0.5s ease;
    }
    .card-professional:hover::after {
    transform: scaleX(1);
    }
}
.card-professional:active {
    transform: scale(0.96) translateY(0) !important;
    background-color: #f8fafc;
    box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.05);
    transition: all 0.1s ease;
}
.card-professional:hover .icon-box,
.card-professional:active .icon-box {
    background-color: #2563eb !important;
    color: white !important;
    transform: scale(1.1);
}
.icon-box {
    transition: all 0.3s ease;
}
.card-container {
    opacity: 0;
    animation: fadeUp 0.6s ease-out forwards;
}
@keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}
.ranking-number {
    position: absolute;
    top: 0.5rem;
    right: 1rem;
    font-size: 2.1rem;
    font-weight: 900;
    color: #2564eb16;
    line-height: 1;
    letter-spacing: -0.05em;
    user-select: none;
    pointer-events: none;
    transition: all 0.4s ease;
    z-index: 0;
}
.card-professional:hover .ranking-number {
    color: #155dfb15;
    transform: scale(1.1) translateY(5px);
}
.relative.z-10 {
    position: relative;
    z-index: 10;
}
</style>